<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gridea</title>
<link rel="shortcut icon" href="https://haoruizhi.github.io/favicon.ico?v=1590119408221">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://haoruizhi.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Gridea - Atom Feed" href="https://haoruizhi.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°" />
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://haoruizhi.github.io">
  <img class="avatar" src="https://haoruizhi.github.io/images/avatar.png?v=1590119408221" alt="">
  </a>
  <h1 class="site-title">
    Gridea
  </h1>
  <p class="site-description">
    æ¸©æ•…è€ŒçŸ¥æ–°
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

    
        <div class="post-container">
  
    <article class="post">
      <a href="https://haoruizhi.github.io/post/yi-dao-nsobject-mian-shi-ti-xia-de-tan-suo/">
        <h2 class="post-title">ä¸€é“NSObjecté¢è¯•é¢˜ä¸‹çš„æ¢ç´¢</h2>
      </a>
      <div class="post-info">
        <span>
          2020-05-22
        </span>
        <span>
          3 min read
        </span>
        
          <a href="https://haoruizhi.github.io/tag/4e8H-Be5R/" class="post-tag">
            # iOSå¼€å‘
          </a>
        
          <a href="https://haoruizhi.github.io/tag/YBNF3XjaP-/" class="post-tag">
            # NSObject
          </a>
        
      </div>
      
      <div class="post-abstract">
        <p>æœ‰ä¸€é“é¢è¯•é¢˜é—®çš„æ˜¯NSObjectå¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ï¼Ÿ<br>
å›ç­”è¿™é“é¢è¯•é¢˜ä¹‹å‰è®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹Objective-Cçš„æœ¬è´¨</p>
<p><img src="https://haoruizhi.github.io/post-images/1590119033599.jpg" alt="" loading="lazy"><br>
è¿™æ˜¯OCè¯­è¨€çš„è½¬åŒ–è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸ŠObjective-Cçš„å¯¹è±¡ã€ç±»ä¸»è¦æ˜¯åŸºäºC\C++çš„ç»“æ„ä½“æ¥å®ç°çš„ã€‚<br>
æˆ‘ä»¬å¯ä»¥å°è¯•æŠŠObjective-Cä»£ç è½¬æ¢ä¸ºC\C++ä»£ç ï¼Œå…·ä½“çš„ä»£ç æ˜¯xcrun  -sdk  iphoneos  clang  -arch  arm64  -rewrite-objc  OCæºæ–‡ä»¶  -o  è¾“å‡ºçš„CPPæ–‡ä»¶<br>
ä¾‹å¦‚ï¼šxcrun -sdk iphoneos clang -arch arm64 -rewrite-objc  main.m  -o main.cpp<br>
cppæ–‡ä»¶ä¸­æŠŠNSObjectå¯¹è±¡è½¬è¯‘ä¸ºäº†ä¸€ä¸ªç»“æ„ä½“ï¼Œ<br>
struct NSObject_IMPL {<br>
Class isa;<br>
};<br>
é‡Œé¢ä»…ä»…è¿˜æœ‰ä¸€ä¸ªisaæŒ‡é’ˆ<br>
çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥å›ç­”NSObjectå¯¹è±¡å†…éƒ¨åªä½¿ç”¨äº†8ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼ˆ64bitç¯å¢ƒä¸‹ï¼Œå¯ä»¥é€šè¿‡å¼•å…¥runtimeè°ƒç”¨class_getInstanceSizeå‡½æ•°è·å¾—ï¼‰<br>
é‚£å¦‚æœæ˜¯ç»§æ‰¿è‡ªNSObectçš„ç±»å‘¢ï¼Ÿ<br>
ç„¶åæˆ‘ä»¬åœ¨main.mä¸­å®šä¹‰äº†ä¸€ä¸ªpersonå¯¹è±¡<br>
@interface Person : NSObject <NSCopying> {<br>
int _age;<br>
}<br>
@property (nonatomic, assign) int height;<br>
@end<br>
@implementation Person<br>
@end</p>
<p>ç»è¿‡è½¬è¯‘åå†cppæ–‡ä»¶ä¸­è½¬ä¸ºäº†<br>
struct Person_IMPL {<br>
struct NSObject_IMPL NSObject_IVARS;<br>
int _age;<br>
int _height;<br>
};<br>
å¯ä»¥è¿‘ä¼¼çš„ç†è§£ä¸º<br>
struct Person_IMPL {<br>
Class isa;<br>
int _age;<br>
int _height;<br>
};<br>
æ‰€ä»¥ä¸€ä¸ªPersonå¯¹è±¡å ç”¨çš„å†…å­˜åŒºé—´æ˜¯ä¸€ä¸ªisaæŒ‡é’ˆ+ä¸¤ä¸ªintç±»å‹å˜é‡çš„å€¼æ‰€å ç”¨çš„å†…å­˜åŒºé—´ã€‚<br>
åŒæ ·åœ¨64ä½æƒ…å†µä¸‹æ˜¯8+4*2 = 16ä¸ªå­—èŠ‚<br>
æ³¨æ„è¿™ä¸ªæ—¶å€™æœ‰ä¸ªå†…å­˜å¯¹é½çš„é—®é¢˜ï¼Œæ¯”å¦‚personå¯¹è±¡ä¸­åªæœ‰ä¸€ä¸ªageå˜é‡ï¼Œæ²¡æœ‰heightï¼Œå ç”¨çš„ç©ºé—´è¿˜æ˜¯16ä¸ªå­—èŠ‚ï¼Œè€Œä¸æ˜¯12ä¸ªå­—èŠ‚ã€‚</p>

      </div>
    </article>
  
    <article class="post">
      <a href="https://haoruizhi.github.io/post/hello-gridea/">
        <h2 class="post-title">Hello Gridea</h2>
      </a>
      <div class="post-info">
        <span>
          2018-12-12
        </span>
        <span>
          2 min read
        </span>
        
          <a href="https://haoruizhi.github.io/tag/oIWeXd19D/" class="post-tag">
            # Gridea
          </a>
        
      </div>
      
        <a href="https://haoruizhi.github.io/post/hello-gridea/" class="post-feature-image" style="background-image: url('https://haoruizhi.github.io/post-images/hello-gridea.png')">
        </a>
      
      <div class="post-abstract">
        <p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>

      </div>
    </article>
  
</div>

    
        <div class="pagination-container">
  
  
</div>

    
        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://haoruizhi.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>
  </body>
</html>
